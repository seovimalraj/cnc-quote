{
  "preflight": [
    {
      "name": "API reachable",
      "passed": true,
      "details": {
        "status": 200,
        "url": "http://localhost:3001/health",
        "passed": true
      }
    },
    {
      "name": "CAD service reachable",
      "passed": false,
      "details": "fetch failed"
    },
    {
      "name": "Storage signed URL roundtrip",
      "passed": false,
      "details": "undefined\n ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command \"test:storage-signed-url\" not found\n\nDid you mean \"pnpm qa:test-storage-signed-url\"?\n"
    },
    {
      "name": "Database migrations applied",
      "passed": true,
      "details": "None of the selected packages has a \"db:check\" script\n"
    }
  ],
  "smoke": [
    {
      "suite_id": "INSTANT_QUOTE_E2E",
      "step": "Upload STEP file at /instant-quote",
      "passed": true,
      "traces": [
        "UI interaction successful"
      ]
    },
    {
      "suite_id": "INSTANT_QUOTE_E2E",
      "step": "Lead gate modal validation",
      "passed": true,
      "traces": [
        "UI interaction successful"
      ]
    },
    {
      "suite_id": "INSTANT_QUOTE_E2E",
      "step": "Lead gate success and route to /quote/:id",
      "passed": true,
      "traces": [
        "UI interaction successful"
      ]
    },
    {
      "suite_id": "INSTANT_QUOTE_E2E",
      "step": "Lead option selection locks price",
      "passed": false,
      "error": "Price lock not persisted - missing PUT /api/quotes/*/lead",
      "traces": [
        "network log missing PUT request",
        "no lock_key in store"
      ]
    },
    {
      "suite_id": "INSTANT_QUOTE_E2E",
      "step": "Checkout session created",
      "passed": true,
      "traces": [
        "UI interaction successful"
      ]
    },
    {
      "suite_id": "DFM_ANALYSIS_E2E",
      "step": "Load /dfm-analysis and populate form",
      "passed": true,
      "traces": [
        "UI interaction successful"
      ]
    },
    {
      "suite_id": "DFM_ANALYSIS_E2E",
      "step": "Gate modal only for new users",
      "passed": true,
      "traces": [
        "UI interaction successful"
      ]
    },
    {
      "suite_id": "DFM_ANALYSIS_E2E",
      "step": "20 checks present with states and highlights",
      "passed": true,
      "traces": [
        "UI interaction successful"
      ]
    },
    {
      "suite_id": "DFM_ANALYSIS_E2E",
      "step": "Top CTAs work",
      "passed": true,
      "traces": [
        "UI interaction successful"
      ]
    },
    {
      "suite_id": "DFM_ANALYSIS_E2E",
      "step": "QAP download generates signed link",
      "passed": true,
      "traces": [
        "UI interaction successful"
      ]
    },
    {
      "suite_id": "DFM_ANALYSIS_E2E",
      "step": "DFM report download",
      "passed": true,
      "traces": [
        "UI interaction successful"
      ]
    }
  ],
  "functional": [
    {
      "name": "RLS policies",
      "passed": false,
      "logs": "undefined\n ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command \"check-rls\" not found\n\nDid you mean \"pnpm qa:check-rls\"?\n"
    },
    {
      "name": "Pricing engine",
      "passed": false,
      "logs": "undefined\n ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command \"check-pricing\" not found\n\nDid you mean \"pnpm qa:check-pricing\"?\n"
    },
    {
      "name": "CAD pipeline",
      "passed": false,
      "logs": "undefined\n ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command \"check-cad\" not found\n\nDid you mean \"pnpm qa:check-cad\"?\n"
    },
    {
      "name": "Payment flow",
      "passed": false,
      "logs": "undefined\n ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command \"check-payment\" not found\n\nDid you mean \"pnpm qa:check-payment\"?\n"
    },
    {
      "name": "Performance SLOs",
      "passed": false,
      "logs": "undefined\n ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command \"check-slos\" not found\n\nDid you mean \"pnpm qa:check-slos\"?\n"
    },
    {
      "name": "Observability wiring",
      "passed": false,
      "logs": "undefined\n ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command \"check-observability\" not found\n\nDid you mean \"pnpm qa:check-observability\"?\n"
    },
    {
      "name": "AI regression fixtures",
      "passed": false,
      "logs": "\n> cnc-quote@0.0.1 qa:ai-regression /root/cnc-quote\n> ts-node --esm scripts/qa-ai-regression.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nTypeError [ERR_UNKNOWN_FILE_EXTENSION]: Unknown file extension \".ts\" for /root/cnc-quote/scripts/qa-ai-regression.ts\n    at Object.getFileProtocolModuleFormat [as file:] (node:internal/modules/esm/get_format:189:9)\n    at defaultGetFormat (node:internal/modules/esm/get_format:232:36)\n    at defaultLoad (node:internal/modules/esm/load:145:22)\n    at async nextLoad (node:internal/modules/esm/hooks:864:22)\n    at async nextLoad (node:internal/modules/esm/hooks:864:22)\n    at async Hooks.load (node:internal/modules/esm/hooks:451:20)\n    at async handleMessage (node:internal/modules/esm/worker:196:18) {\n  code: 'ERR_UNKNOWN_FILE_EXTENSION'\n}\n"
    },
    {
      "name": "Ollama chaos readiness",
      "passed": false,
      "logs": "\n> cnc-quote@0.0.1 qa:seed-ollama-chaos /root/cnc-quote\n> ts-node --esm scripts/seed-ollama-chaos.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nTypeError [ERR_UNKNOWN_FILE_EXTENSION]: Unknown file extension \".ts\" for /root/cnc-quote/scripts/seed-ollama-chaos.ts\n    at Object.getFileProtocolModuleFormat [as file:] (node:internal/modules/esm/get_format:189:9)\n    at defaultGetFormat (node:internal/modules/esm/get_format:232:36)\n    at defaultLoad (node:internal/modules/esm/load:145:22)\n    at async nextLoad (node:internal/modules/esm/hooks:864:22)\n    at async nextLoad (node:internal/modules/esm/hooks:864:22)\n    at async Hooks.load (node:internal/modules/esm/hooks:451:20)\n    at async handleMessage (node:internal/modules/esm/worker:196:18) {\n  code: 'ERR_UNKNOWN_FILE_EXTENSION'\n}\n"
    },
    {
      "name": "Canary shadow comparisons",
      "passed": false,
      "logs": "\n> cnc-quote@0.0.1 qa:canary-shadow /root/cnc-quote\n> ts-node --esm scripts/canary-shadow-compare.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nTypeError [ERR_UNKNOWN_FILE_EXTENSION]: Unknown file extension \".ts\" for /root/cnc-quote/scripts/canary-shadow-compare.ts\n    at Object.getFileProtocolModuleFormat [as file:] (node:internal/modules/esm/get_format:189:9)\n    at defaultGetFormat (node:internal/modules/esm/get_format:232:36)\n    at defaultLoad (node:internal/modules/esm/load:145:22)\n    at async nextLoad (node:internal/modules/esm/hooks:864:22)\n    at async nextLoad (node:internal/modules/esm/hooks:864:22)\n    at async Hooks.load (node:internal/modules/esm/hooks:451:20)\n    at async handleMessage (node:internal/modules/esm/worker:196:18) {\n  code: 'ERR_UNKNOWN_FILE_EXTENSION'\n}\n"
    },
    {
      "name": "Admin recalc smoke (dry-run)",
      "passed": false,
      "logs": "\n> cnc-quote@0.0.1 qa:check-recalc /root/cnc-quote\n> tsx scripts/check-recalc.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nError: JWT_TOKEN environment variable is required\n"
    },
    {
      "name": "Supplier sync smoke",
      "passed": false,
      "logs": "\n> cnc-quote@0.0.1 qa:check-supplier /root/cnc-quote\n> tsx scripts/check-supplier-sync.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nError: JWT_TOKEN environment variable is required\n"
    }
  ],
  "ui_audit": {
    "lighthouse": {},
    "axe": {}
  },
  "ui_issues": [
    {
      "code": "A11Y_CONTRAST",
      "route": "/instant-quote",
      "nodes": 6,
      "severity": "serious",
      "fix": "Adjust --color-primary to #1e3a8a; text-base to #111827"
    }
  ],
  "security": [
    {
      "name": "CORS/CSP/HSTS headers",
      "passed": true,
      "details": {
        "status": 200,
        "url": "http://localhost:3000/",
        "passed": true
      }
    },
    {
      "name": "Signed file URLs only",
      "passed": true,
      "details": {
        "status": 404,
        "url": "http://localhost:3001/files/random",
        "passed": true
      }
    },
    {
      "name": "Lead rate limit",
      "passed": false,
      "details": "node:internal/modules/esm/resolve:873\n  throw new ERR_MODULE_NOT_FOUND(packageName, fileURLToPath(base), null);\n        ^\n\nError [ERR_MODULE_NOT_FOUND]: Cannot find package 'node-fetch' imported from /root/cnc-quote/scripts/bomb-leads.js\n    at packageResolve (node:internal/modules/esm/resolve:873:9)\n    at moduleResolve (node:internal/modules/esm/resolve:946:18)\n    at defaultResolve (node:internal/modules/esm/resolve:1188:11)\n    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:708:12)\n    at #cachedDefaultResolve (node:internal/modules/esm/loader:657:25)\n    at ModuleLoader.resolve (node:internal/modules/esm/loader:640:38)\n    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:264:38)\n    at ModuleJob._link (node:internal/modules/esm/module_job:168:49) {\n  code: 'ERR_MODULE_NOT_FOUND'\n}\n\nNode.js v20.19.5\n"
    }
  ],
  "customer_audit": [
    {
      "name": "Customer Surface Map",
      "cmd": "pnpm audit:customer:surface",
      "exitCode": 1,
      "output": "\n> cnc-quote@0.0.1 audit:customer:surface /root/cnc-quote\n> tsx scripts/audit/customer-surface-map.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nnode:internal/modules/esm/resolve:322\n  return new ERR_PACKAGE_PATH_NOT_EXPORTED(\n         ^\n\nError [ERR_PACKAGE_PATH_NOT_EXPORTED]: No \"exports\" main defined in /root/cnc-quote/node_modules/.pnpm/globby@14.1.0/node_modules/unicorn-magic/package.json\n    at exportsNotFound (node:internal/modules/esm/resolve:322:10)\n    at packageExportsResolve (node:internal/modules/esm/resolve:613:13)\n    at resolveExports (node:internal/modules/cjs/loader:638:36)\n    at Module._findPath (node:internal/modules/cjs/loader:711:31)\n    at Module._resolveFilename (node:internal/modules/cjs/loader:1193:27)\n    at nextResolveSimple (/root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:1004)\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:3:2630\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:3:1542\n    at resolveTsPaths (/root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:760)\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:1102 {\n  code: 'ERR_PACKAGE_PATH_NOT_EXPORTED'\n}\n\nNode.js v20.19.5\n"
    },
    {
      "name": "Customer Critical Flow Audit",
      "cmd": "pnpm audit:customer:flow",
      "exitCode": 1,
      "output": "\n> cnc-quote@0.0.1 audit:customer:flow /root/cnc-quote\n> tsx scripts/audit/customer-critical-flow-audit.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nnode:internal/modules/esm/resolve:322\n  return new ERR_PACKAGE_PATH_NOT_EXPORTED(\n         ^\n\nError [ERR_PACKAGE_PATH_NOT_EXPORTED]: No \"exports\" main defined in /root/cnc-quote/node_modules/.pnpm/globby@14.1.0/node_modules/unicorn-magic/package.json\n    at exportsNotFound (node:internal/modules/esm/resolve:322:10)\n    at packageExportsResolve (node:internal/modules/esm/resolve:613:13)\n    at resolveExports (node:internal/modules/cjs/loader:638:36)\n    at Module._findPath (node:internal/modules/cjs/loader:711:31)\n    at Module._resolveFilename (node:internal/modules/cjs/loader:1193:27)\n    at nextResolveSimple (/root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:1004)\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:3:2630\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:3:1542\n    at resolveTsPaths (/root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:760)\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:1102 {\n  code: 'ERR_PACKAGE_PATH_NOT_EXPORTED'\n}\n\nNode.js v20.19.5\n"
    },
    {
      "name": "Customer API Trace",
      "cmd": "pnpm audit:customer:api-trace",
      "exitCode": 1,
      "output": "\n> cnc-quote@0.0.1 audit:customer:api-trace /root/cnc-quote\n> tsx scripts/audit/customer-api-trace.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nnode:internal/modules/esm/resolve:322\n  return new ERR_PACKAGE_PATH_NOT_EXPORTED(\n         ^\n\nError [ERR_PACKAGE_PATH_NOT_EXPORTED]: No \"exports\" main defined in /root/cnc-quote/node_modules/.pnpm/globby@14.1.0/node_modules/unicorn-magic/package.json\n    at exportsNotFound (node:internal/modules/esm/resolve:322:10)\n    at packageExportsResolve (node:internal/modules/esm/resolve:613:13)\n    at resolveExports (node:internal/modules/cjs/loader:638:36)\n    at Module._findPath (node:internal/modules/cjs/loader:711:31)\n    at Module._resolveFilename (node:internal/modules/cjs/loader:1193:27)\n    at nextResolveSimple (/root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:1004)\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:3:2630\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:3:1542\n    at resolveTsPaths (/root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:760)\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:1102 {\n  code: 'ERR_PACKAGE_PATH_NOT_EXPORTED'\n}\n\nNode.js v20.19.5\n"
    },
    {
      "name": "Customer Audit Dashboard",
      "cmd": "pnpm audit:customer:dashboard",
      "exitCode": 1,
      "output": "\n> cnc-quote@0.0.1 audit:customer:dashboard /root/cnc-quote\n> tsx scripts/audit/customer-audit-dashboard.ts\n\n ELIFECYCLE  Command failed with exit code 1.\n\nnode:internal/modules/run_main:123\n    triggerUncaughtException(\n    ^\nError: Transform failed with 3 errors:\n/root/cnc-quote/scripts/audit/customer-audit-dashboard.ts:630:10: ERROR: The symbol \"ciRecommendation\" has already been declared\n/root/cnc-quote/scripts/audit/customer-audit-dashboard.ts:630:28: ERROR: The symbol \"hasCriticalFindings\" has already been declared\n/root/cnc-quote/scripts/audit/customer-audit-dashboard.ts:630:49: ERROR: The symbol \"hasHighFindings\" has already been declared\n    at failureErrorWithLog (/root/cnc-quote/node_modules/.pnpm/esbuild@0.25.10/node_modules/esbuild/lib/main.js:1467:15)\n    at /root/cnc-quote/node_modules/.pnpm/esbuild@0.25.10/node_modules/esbuild/lib/main.js:736:50\n    at responseCallbacks.<computed> (/root/cnc-quote/node_modules/.pnpm/esbuild@0.25.10/node_modules/esbuild/lib/main.js:603:9)\n    at handleIncomingPacket (/root/cnc-quote/node_modules/.pnpm/esbuild@0.25.10/node_modules/esbuild/lib/main.js:658:12)\n    at Socket.readFromStdout (/root/cnc-quote/node_modules/.pnpm/esbuild@0.25.10/node_modules/esbuild/lib/main.js:581:7)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)\n    at Pipe.onStreamRead (node:internal/stream_base_commons:191:23) {\n  name: 'TransformError'\n}\n\nNode.js v20.19.5\n"
    },
    {
      "name": "Customer Quote Journey Fixture Validation",
      "cmd": "pnpm audit:customer:journey-validate",
      "exitCode": 1,
      "output": "\n> cnc-quote@0.0.1 audit:customer:journey-validate /root/cnc-quote\n> tsx scripts/audit/customer-journey-validate.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nError: ENOENT: no such file or directory, open '/root/cnc-quote/scripts/audit/output/customer-api-trace.json'\n    at async open (node:internal/fs/promises:639:25)\n    at async readFile (node:internal/fs/promises:1246:14)\n    at async loadApiTraceReport (/root/cnc-quote/scripts/audit/customer-journey-validate.ts:143:15)\n    at async validateFixtures (/root/cnc-quote/scripts/audit/customer-journey-validate.ts:171:21)\n    at async main (/root/cnc-quote/scripts/audit/customer-journey-validate.ts:266:19) {\n  errno: -2,\n  code: 'ENOENT',\n  syscall: 'open',\n  path: '/root/cnc-quote/scripts/audit/output/customer-api-trace.json'\n}\n"
    }
  ],
  "problems_found": [
    {
      "id": "PRB-1761224051886",
      "suite": "preflight",
      "fail_code": "CAD_DOWN",
      "severity": "blocker",
      "summary": "CAD service reachable failed",
      "evidence": [
        "fetch failed"
      ],
      "title": "CAD service not reachable",
      "owner": "cad",
      "suggested_fix": [
        "RESTART_CAD",
        "CHECK_PORT_8000"
      ],
      "status": "open"
    },
    {
      "id": "PRB-1761224052231",
      "suite": "preflight",
      "fail_code": "STORAGE_SIGNED_URL_FAIL",
      "severity": "blocker",
      "summary": "Storage signed URL roundtrip failed",
      "evidence": [
        "undefined\n ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command \"test:storage-signed-url\" not found\n\nDid you mean \"pnpm qa:test-storage-signed-url\"?\n"
      ]
    },
    {
      "id": "PRB-1761224053284",
      "suite": "customer_audit",
      "fail_code": "CUS_AUDIT_SURFACE",
      "severity": "blocker",
      "summary": "Customer Surface Map failed",
      "evidence": [
        "\n> cnc-quote@0.0.1 audit:customer:surface /root/cnc-quote\n> tsx scripts/audit/customer-surface-map.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nnode:internal/modules/esm/resolve:322\n  return new ERR_PACKAGE_PATH_NOT_EXPORTED(\n         ^\n\nError [ERR_PACKAGE_PATH_NOT_EXPORTED]: No \"exports\" main defined in /root/cnc-quote/node_modules/.pnpm/globby@14.1.0/node_modules/unicorn-magic/package.json\n    at exportsNotFound (node:internal/modules/esm/resolve:322:10)\n    at packageExportsResolve (node:internal/modules/esm/resolve:613:13)\n    at resolveExports (node:internal/modules/cjs/loader:638:36)\n    at Module._findPath (node:internal/modules/cjs/loader:711:31)\n    at Module._resolveFilename (node:internal/modules/cjs/loader:1193:27)\n    at nextResolveSimple (/root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:1004)\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:3:2630\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:3:1542\n    at resolveTsPaths (/root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:760)\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:1102 {\n  code: 'ERR_PACKAGE_PATH_NOT_EXPORTED'\n}\n\nNode.js v20.19.5\n"
      ]
    },
    {
      "id": "PRB-1761224053981",
      "suite": "customer_audit",
      "fail_code": "CUS_AUDIT_FLOW",
      "severity": "blocker",
      "summary": "Customer Critical Flow Audit failed",
      "evidence": [
        "\n> cnc-quote@0.0.1 audit:customer:flow /root/cnc-quote\n> tsx scripts/audit/customer-critical-flow-audit.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nnode:internal/modules/esm/resolve:322\n  return new ERR_PACKAGE_PATH_NOT_EXPORTED(\n         ^\n\nError [ERR_PACKAGE_PATH_NOT_EXPORTED]: No \"exports\" main defined in /root/cnc-quote/node_modules/.pnpm/globby@14.1.0/node_modules/unicorn-magic/package.json\n    at exportsNotFound (node:internal/modules/esm/resolve:322:10)\n    at packageExportsResolve (node:internal/modules/esm/resolve:613:13)\n    at resolveExports (node:internal/modules/cjs/loader:638:36)\n    at Module._findPath (node:internal/modules/cjs/loader:711:31)\n    at Module._resolveFilename (node:internal/modules/cjs/loader:1193:27)\n    at nextResolveSimple (/root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:1004)\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:3:2630\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:3:1542\n    at resolveTsPaths (/root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:760)\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:1102 {\n  code: 'ERR_PACKAGE_PATH_NOT_EXPORTED'\n}\n\nNode.js v20.19.5\n"
      ]
    },
    {
      "id": "PRB-1761224054739",
      "suite": "customer_audit",
      "fail_code": "CUS_AUDIT_API_TRACE",
      "severity": "blocker",
      "summary": "Customer API Trace failed",
      "evidence": [
        "\n> cnc-quote@0.0.1 audit:customer:api-trace /root/cnc-quote\n> tsx scripts/audit/customer-api-trace.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nnode:internal/modules/esm/resolve:322\n  return new ERR_PACKAGE_PATH_NOT_EXPORTED(\n         ^\n\nError [ERR_PACKAGE_PATH_NOT_EXPORTED]: No \"exports\" main defined in /root/cnc-quote/node_modules/.pnpm/globby@14.1.0/node_modules/unicorn-magic/package.json\n    at exportsNotFound (node:internal/modules/esm/resolve:322:10)\n    at packageExportsResolve (node:internal/modules/esm/resolve:613:13)\n    at resolveExports (node:internal/modules/cjs/loader:638:36)\n    at Module._findPath (node:internal/modules/cjs/loader:711:31)\n    at Module._resolveFilename (node:internal/modules/cjs/loader:1193:27)\n    at nextResolveSimple (/root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:1004)\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:3:2630\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:3:1542\n    at resolveTsPaths (/root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:760)\n    at /root/cnc-quote/node_modules/.pnpm/tsx@4.20.6/node_modules/tsx/dist/register-D46fvsV_.cjs:4:1102 {\n  code: 'ERR_PACKAGE_PATH_NOT_EXPORTED'\n}\n\nNode.js v20.19.5\n"
      ]
    },
    {
      "id": "PRB-1761224055307",
      "suite": "customer_audit",
      "fail_code": "CUS_AUDIT_DASHBOARD",
      "severity": "blocker",
      "summary": "Customer Audit Dashboard failed",
      "evidence": [
        "\n> cnc-quote@0.0.1 audit:customer:dashboard /root/cnc-quote\n> tsx scripts/audit/customer-audit-dashboard.ts\n\n ELIFECYCLE  Command failed with exit code 1.\n\nnode:internal/modules/run_main:123\n    triggerUncaughtException(\n    ^\nError: Transform failed with 3 errors:\n/root/cnc-quote/scripts/audit/customer-audit-dashboard.ts:630:10: ERROR: The symbol \"ciRecommendation\" has already been declared\n/root/cnc-quote/scripts/audit/customer-audit-dashboard.ts:630:28: ERROR: The symbol \"hasCriticalFindings\" has already been declared\n/root/cnc-quote/scripts/audit/customer-audit-dashboard.ts:630:49: ERROR: The symbol \"hasHighFindings\" has already been declared\n    at failureErrorWithLog (/root/cnc-quote/node_modules/.pnpm/esbuild@0.25.10/node_modules/esbuild/lib/main.js:1467:15)\n    at /root/cnc-quote/node_modules/.pnpm/esbuild@0.25.10/node_modules/esbuild/lib/main.js:736:50\n    at responseCallbacks.<computed> (/root/cnc-quote/node_modules/.pnpm/esbuild@0.25.10/node_modules/esbuild/lib/main.js:603:9)\n    at handleIncomingPacket (/root/cnc-quote/node_modules/.pnpm/esbuild@0.25.10/node_modules/esbuild/lib/main.js:658:12)\n    at Socket.readFromStdout (/root/cnc-quote/node_modules/.pnpm/esbuild@0.25.10/node_modules/esbuild/lib/main.js:581:7)\n    at Socket.emit (node:events:524:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)\n    at Pipe.onStreamRead (node:internal/stream_base_commons:191:23) {\n  name: 'TransformError'\n}\n\nNode.js v20.19.5\n"
      ]
    },
    {
      "id": "PRB-1761224055972",
      "suite": "customer_audit",
      "fail_code": "CUS_AUDIT_JOURNEY",
      "severity": "blocker",
      "summary": "Customer Quote Journey Fixture Validation failed",
      "evidence": [
        "\n> cnc-quote@0.0.1 audit:customer:journey-validate /root/cnc-quote\n> tsx scripts/audit/customer-journey-validate.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nError: ENOENT: no such file or directory, open '/root/cnc-quote/scripts/audit/output/customer-api-trace.json'\n    at async open (node:internal/fs/promises:639:25)\n    at async readFile (node:internal/fs/promises:1246:14)\n    at async loadApiTraceReport (/root/cnc-quote/scripts/audit/customer-journey-validate.ts:143:15)\n    at async validateFixtures (/root/cnc-quote/scripts/audit/customer-journey-validate.ts:171:21)\n    at async main (/root/cnc-quote/scripts/audit/customer-journey-validate.ts:266:19) {\n  errno: -2,\n  code: 'ENOENT',\n  syscall: 'open',\n  path: '/root/cnc-quote/scripts/audit/output/customer-api-trace.json'\n}\n"
      ]
    },
    {
      "id": "PRB-1761224055972",
      "suite": "INSTANT_QUOTE_E2E",
      "fail_code": "IQ_PRICE_LOCK_FAIL",
      "severity": "major",
      "summary": "Lead option selection locks price failed",
      "evidence": [
        "Price lock not persisted - missing PUT /api/quotes/*/lead"
      ],
      "title": "Price lock not persisted",
      "owner": "api",
      "suggested_fix": [
        "ENSURE_PUT_LEAD_ENDPOINT",
        "CACHE_WRITE_THROUGH_PRICE_LOCK"
      ],
      "status": "open"
    },
    {
      "id": "PRB-1761224056291",
      "suite": "functional",
      "fail_code": "RLS_FAIL",
      "severity": "blocker",
      "summary": "RLS policies failed",
      "evidence": [
        "undefined\n ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command \"check-rls\" not found\n\nDid you mean \"pnpm qa:check-rls\"?\n"
      ],
      "title": "RLS policies failing",
      "owner": "db",
      "suggested_fix": [
        "RUN_PNPM_CHECK_RLS",
        "REVIEW_POLICIES"
      ],
      "status": "open"
    },
    {
      "id": "PRB-1761224056597",
      "suite": "functional",
      "fail_code": "PRICING_FAIL",
      "severity": "major",
      "summary": "Pricing engine failed",
      "evidence": [
        "undefined\n ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command \"check-pricing\" not found\n\nDid you mean \"pnpm qa:check-pricing\"?\n"
      ]
    },
    {
      "id": "PRB-1761224056893",
      "suite": "functional",
      "fail_code": "CAD_PIPELINE_FAIL",
      "severity": "major",
      "summary": "CAD pipeline failed",
      "evidence": [
        "undefined\n ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command \"check-cad\" not found\n\nDid you mean \"pnpm qa:check-cad\"?\n"
      ]
    },
    {
      "id": "PRB-1761224057206",
      "suite": "functional",
      "fail_code": "PAYMENT_FAIL",
      "severity": "major",
      "summary": "Payment flow failed",
      "evidence": [
        "undefined\n ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command \"check-payment\" not found\n\nDid you mean \"pnpm qa:check-payment\"?\n"
      ]
    },
    {
      "id": "PRB-1761224057507",
      "suite": "functional",
      "fail_code": "SLO_FAIL",
      "severity": "major",
      "summary": "Performance SLOs failed",
      "evidence": [
        "undefined\n ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command \"check-slos\" not found\n\nDid you mean \"pnpm qa:check-slos\"?\n"
      ],
      "title": "Performance SLOs unmet",
      "owner": "platform",
      "suggested_fix": [
        "ENABLE_PRICE_CACHE",
        "BATCH_CAD_TASKS",
        "PROFILE_HOT_PATHS"
      ],
      "status": "open"
    },
    {
      "id": "PRB-1761224057811",
      "suite": "functional",
      "fail_code": "OBSERVABILITY_FAIL",
      "severity": "major",
      "summary": "Observability wiring failed",
      "evidence": [
        "undefined\n ERR_PNPM_RECURSIVE_EXEC_FIRST_FAIL  Command \"check-observability\" not found\n\nDid you mean \"pnpm qa:check-observability\"?\n"
      ]
    },
    {
      "id": "PRB-1761224058541",
      "suite": "functional",
      "fail_code": "AI_REGRESSION_DRIFT",
      "severity": "blocker",
      "summary": "AI regression fixtures failed",
      "evidence": [
        "\n> cnc-quote@0.0.1 qa:ai-regression /root/cnc-quote\n> ts-node --esm scripts/qa-ai-regression.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nTypeError [ERR_UNKNOWN_FILE_EXTENSION]: Unknown file extension \".ts\" for /root/cnc-quote/scripts/qa-ai-regression.ts\n    at Object.getFileProtocolModuleFormat [as file:] (node:internal/modules/esm/get_format:189:9)\n    at defaultGetFormat (node:internal/modules/esm/get_format:232:36)\n    at defaultLoad (node:internal/modules/esm/load:145:22)\n    at async nextLoad (node:internal/modules/esm/hooks:864:22)\n    at async nextLoad (node:internal/modules/esm/hooks:864:22)\n    at async Hooks.load (node:internal/modules/esm/hooks:451:20)\n    at async handleMessage (node:internal/modules/esm/worker:196:18) {\n  code: 'ERR_UNKNOWN_FILE_EXTENSION'\n}\n"
      ],
      "title": "AI regression baseline drift",
      "owner": "ai",
      "suggested_fix": [
        "REVIEW_AI_REGRESSIONS",
        "ROLLBACK_AI_CANARY"
      ],
      "status": "open"
    },
    {
      "id": "PRB-1761224059151",
      "suite": "functional",
      "fail_code": "AI_CHAOS_FAIL",
      "severity": "major",
      "summary": "Ollama chaos readiness failed",
      "evidence": [
        "\n> cnc-quote@0.0.1 qa:seed-ollama-chaos /root/cnc-quote\n> ts-node --esm scripts/seed-ollama-chaos.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nTypeError [ERR_UNKNOWN_FILE_EXTENSION]: Unknown file extension \".ts\" for /root/cnc-quote/scripts/seed-ollama-chaos.ts\n    at Object.getFileProtocolModuleFormat [as file:] (node:internal/modules/esm/get_format:189:9)\n    at defaultGetFormat (node:internal/modules/esm/get_format:232:36)\n    at defaultLoad (node:internal/modules/esm/load:145:22)\n    at async nextLoad (node:internal/modules/esm/hooks:864:22)\n    at async nextLoad (node:internal/modules/esm/hooks:864:22)\n    at async Hooks.load (node:internal/modules/esm/hooks:451:20)\n    at async handleMessage (node:internal/modules/esm/worker:196:18) {\n  code: 'ERR_UNKNOWN_FILE_EXTENSION'\n}\n"
      ],
      "title": "Ollama chaos endpoint unavailable",
      "owner": "ai",
      "suggested_fix": [
        "RESET_OLLAMA_CLUSTER"
      ],
      "status": "open"
    },
    {
      "id": "PRB-1761224059801",
      "suite": "functional",
      "fail_code": "AI_CANARY_DRIFT",
      "severity": "blocker",
      "summary": "Canary shadow comparisons failed",
      "evidence": [
        "\n> cnc-quote@0.0.1 qa:canary-shadow /root/cnc-quote\n> ts-node --esm scripts/canary-shadow-compare.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nTypeError [ERR_UNKNOWN_FILE_EXTENSION]: Unknown file extension \".ts\" for /root/cnc-quote/scripts/canary-shadow-compare.ts\n    at Object.getFileProtocolModuleFormat [as file:] (node:internal/modules/esm/get_format:189:9)\n    at defaultGetFormat (node:internal/modules/esm/get_format:232:36)\n    at defaultLoad (node:internal/modules/esm/load:145:22)\n    at async nextLoad (node:internal/modules/esm/hooks:864:22)\n    at async nextLoad (node:internal/modules/esm/hooks:864:22)\n    at async Hooks.load (node:internal/modules/esm/hooks:451:20)\n    at async handleMessage (node:internal/modules/esm/worker:196:18) {\n  code: 'ERR_UNKNOWN_FILE_EXTENSION'\n}\n"
      ],
      "title": "Canary pricing drift detected",
      "owner": "ai",
      "suggested_fix": [
        "ROLLBACK_AI_CANARY"
      ],
      "status": "open"
    },
    {
      "id": "PRB-1761224060492",
      "suite": "functional",
      "fail_code": "ADMIN_RECALC_SMOKE_FAIL",
      "severity": "major",
      "summary": "Admin recalc smoke (dry-run) failed",
      "evidence": [
        "\n> cnc-quote@0.0.1 qa:check-recalc /root/cnc-quote\n> tsx scripts/check-recalc.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nError: JWT_TOKEN environment variable is required\n"
      ]
    },
    {
      "id": "PRB-1761224061184",
      "suite": "supplier",
      "fail_code": "SUPPLIER_SMOKE_FAIL",
      "severity": "major",
      "summary": "Supplier sync smoke failed",
      "evidence": [
        "\n> cnc-quote@0.0.1 qa:check-supplier /root/cnc-quote\n> tsx scripts/check-supplier-sync.ts\n\n ELIFECYCLE  Command failed with exit code 1.\nError: JWT_TOKEN environment variable is required\n"
      ]
    },
    {
      "id": "PRB-1761224061236",
      "suite": "security",
      "fail_code": "LEADS_RATE_LIMIT_DISABLED",
      "severity": "major",
      "summary": "Lead rate limit failed",
      "evidence": [
        "node:internal/modules/esm/resolve:873\n  throw new ERR_MODULE_NOT_FOUND(packageName, fileURLToPath(base), null);\n        ^\n\nError [ERR_MODULE_NOT_FOUND]: Cannot find package 'node-fetch' imported from /root/cnc-quote/scripts/bomb-leads.js\n    at packageResolve (node:internal/modules/esm/resolve:873:9)\n    at moduleResolve (node:internal/modules/esm/resolve:946:18)\n    at defaultResolve (node:internal/modules/esm/resolve:1188:11)\n    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:708:12)\n    at #cachedDefaultResolve (node:internal/modules/esm/loader:657:25)\n    at ModuleLoader.resolve (node:internal/modules/esm/loader:640:38)\n    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:264:38)\n    at ModuleJob._link (node:internal/modules/esm/module_job:168:49) {\n  code: 'ERR_MODULE_NOT_FOUND'\n}\n\nNode.js v20.19.5\n"
      ]
    }
  ],
  "autofix_applied": [
    {
      "id": "FIX-1761224061266",
      "recipe": "ENSURE_PUT_LEAD_ENDPOINT",
      "result": "patched",
      "logs": "Autofix applied successfully"
    },
    {
      "id": "FIX-1761224061266",
      "recipe": "CACHE_WRITE_THROUGH_PRICE_LOCK",
      "result": "patched",
      "logs": "Autofix applied successfully"
    },
    {
      "id": "FIX-1761224061592",
      "recipe": "REVIEW_POLICIES",
      "result": "patched",
      "logs": "Autofix applied successfully"
    },
    {
      "id": "FIX-1761224061593",
      "recipe": "ENABLE_PRICE_CACHE",
      "result": "patched",
      "logs": "Autofix applied successfully"
    },
    {
      "id": "FIX-1761224061593",
      "recipe": "BATCH_CAD_TASKS",
      "result": "patched",
      "logs": "Autofix applied successfully"
    },
    {
      "id": "FIX-1761224061621",
      "recipe": "REVIEW_AI_REGRESSIONS",
      "result": "patched",
      "logs": "Autofix applied successfully"
    },
    {
      "id": "FIX-1761224061621",
      "recipe": "ROLLBACK_AI_CANARY",
      "result": "patched",
      "logs": "Autofix applied successfully"
    },
    {
      "id": "FIX-1761224061621",
      "recipe": "RESET_OLLAMA_CLUSTER",
      "result": "patched",
      "logs": "Autofix applied successfully"
    },
    {
      "id": "FIX-1761224061621",
      "recipe": "ROLLBACK_AI_CANARY",
      "result": "patched",
      "logs": "Autofix applied successfully"
    }
  ],
  "publish_gate": {
    "eligible": false,
    "reasons": [
      "Preflight checks failed",
      "Smoke tests failed",
      "Functional tests failed",
      "Security tests failed",
      "10 critical/blocker problems found"
    ]
  }
}