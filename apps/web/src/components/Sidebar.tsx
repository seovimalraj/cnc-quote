'use client';

import { usePathname } from 'next/navigation';
import Link from 'next/link';
import Image from 'next/image';
import SidebarItem from './SidebarItem';
import ClickOutside from '@/components/ClickOutside';
import useLocalStorage from '@/hooks/useLocalStorage';

interface SidebarProps {
  sidebarOpen: boolean;
  setSidebarOpen: (arg: boolean) => void;
}

const menuGroups = [
  {
    name: 'MENU',
    menuItems: [
      {
        icon: (
          <svg
            className="fill-current"
            width="18"
            height="18"
            viewBox="0 0 18 18"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M6.10322 0.956299H2.53135C1.5751 0.956299 0.787598 1.7438 0.787598 2.70005V6.27192C0.787598 7.22817 1.5751 8.01567 2.53135 8.01567H6.10322C7.05947 8.01567 7.84697 7.22817 7.84697 6.27192V2.70005C7.84697 1.7438 7.05947 0.956299 6.10322 0.956299ZM6.60947 6.27192C6.60947 6.55215 6.38322 6.77842 6.10322 6.77842H2.53135C2.2511 6.77842 2.02485 6.55215 2.02485 6.27192V2.70005C2.02485 2.4198 2.2511 2.19355 2.53135 2.19355H6.10322C6.38322 2.19355 6.60947 2.4198 6.60947 2.70005V6.27192Z"
              fill=""
            />
            <path
              d="M15.4689 0.956299H11.8971C10.9408 0.956299 10.1533 1.7438 10.1533 2.70005V6.27192C10.1533 7.22817 10.9408 8.01567 11.8971 8.01567H15.4689C16.4252 8.01567 17.2127 7.22817 17.2127 6.27192V2.70005C17.2127 1.7438 16.4252 0.956299 15.4689 0.956299ZM15.9752 6.27192C15.9752 6.55215 15.749 6.77842 15.4689 6.77842H11.8971C11.6168 6.77842 11.3906 6.55215 11.3906 6.27192V2.70005C11.3906 2.4198 11.6168 2.19355 11.8971 2.19355H15.4689C15.749 2.19355 15.9752 2.4198 15.9752 2.70005V6.27192Z"
              fill=""
            />
            <path
              d="M6.10322 9.92822H2.53135C1.5751 9.92822 0.787598 10.7157 0.787598 11.672V15.2438C0.787598 16.2001 1.5751 16.9876 2.53135 16.9876H6.10322C7.05947 16.9876 7.84697 16.2001 7.84697 15.2438V11.672C7.84697 10.7157 7.05947 9.92822 6.10322 9.92822ZM6.60947 15.2438C6.60947 15.5241 6.38322 15.7503 6.10322 15.7503H2.53135C2.2511 15.7503 2.02485 15.5241 2.02485 15.2438V11.672C2.02485 11.3918 2.2511 11.1655 2.53135 11.1655H6.10322C6.38322 11.1655 6.60947 11.3918 6.60947 11.672V15.2438Z"
              fill=""
            />
            <path
              d="M15.4689 9.92822H11.8971C10.9408 9.92822 10.1533 10.7157 10.1533 11.672V15.2438C10.1533 16.2001 10.9408 16.9876 11.8971 16.9876H15.4689C16.4252 16.9876 17.2127 16.2001 17.2127 15.2438V11.672C17.2127 10.7157 16.4252 9.92822 15.4689 9.92822ZM15.9752 15.2438C15.9752 15.5241 15.749 15.7503 15.4689 15.7503H11.8971C11.6168 15.7503 11.3906 15.5241 11.3906 15.2438V11.672C11.3906 11.3918 11.6168 11.1655 11.8971 11.1655H15.4689C15.749 11.1655 15.9752 11.3918 15.9752 11.672V15.2438Z"
              fill=""
            />
          </svg>
        ),
        label: 'Dashboard',
        route: '/',
      },
      {
        icon: (
          <svg
            className="fill-current"
            width="18"
            height="19"
            viewBox="0 0 18 19"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clipPath="url(#clip0_130_9756)">
              <path
                d="M15.7501 0.55835H2.2501C1.29385 0.55835 0.506348 1.34585 0.506348 2.3021V15.8083C0.506348 16.7646 1.29385 17.5521 2.2501 17.5521H15.7501C16.7063 17.5521 17.4938 16.7646 17.4938 15.8083V2.3021C17.4938 1.34585 16.7063 0.55835 15.7501 0.55835ZM6.13135 11.9646H2.2501C2.01447 11.9646 1.82197 11.7721 1.82197 11.5365V8.2396C1.82197 8.004 2.01447 7.8115 2.2501 7.8115H6.13135C6.36698 7.8115 6.55948 8.004 6.55948 8.2396V11.5365C6.55948 11.7721 6.36698 11.9646 6.13135 11.9646ZM6.13135 6.0546H2.2501C2.01447 6.0546 1.82197 5.8621 1.82197 5.6265V2.3296C1.82197 2.094 2.01447 1.9015 2.2501 1.9015H6.13135C6.36698 1.9015 6.55948 2.094 6.55948 2.3296V5.6265C6.55948 5.8621 6.36698 6.0546 6.13135 6.0546ZM11.9188 11.9646H8.0376C7.80198 11.9646 7.60948 11.7721 7.60948 11.5365V8.2396C7.60948 8.004 7.80198 7.8115 8.0376 7.8115H11.9188C12.1545 7.8115 12.347 8.004 12.347 8.2396V11.5365C12.347 11.7721 12.1545 11.9646 11.9188 11.9646ZM11.9188 6.0546H8.0376C7.80198 6.0546 7.60948 5.8621 7.60948 5.6265V2.3296C7.60948 2.094 7.80198 1.9015 8.0376 1.9015H11.9188C12.1545 1.9015 12.347 2.094 12.347 2.3296V5.6265C12.347 5.8621 12.1545 6.0546 11.9188 6.0546Z"
                fill=""
              />
            </g>
            <defs>
              <clipPath id="clip0_130_9756">
                <rect
                  width="16.9873"
                  height="16.994"
                  fill="white"
                  transform="translate(0.506348 0.55835)"
                />
              </clipPath>
            </defs>
          </svg>
        ),
        label: 'Tables',
        route: '/tables',
      },
      {
        icon: (
          <svg
            className="fill-current"
            width="18"
            height="18"
            viewBox="0 0 18 18"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M9.0002 7.79065C9.3022 7.79065 9.5492 8.03765 9.5492 8.33965V13.6693L13.6402 11.8773C13.8822 11.7653 14.1542 11.8963 14.2662 12.1383C14.3782 12.3803 14.2472 12.6523 14.0052 12.7643L9.7632 14.5833C9.6032 14.6543 9.4212 14.6543 9.2612 14.5833L4.9972 12.7643C4.7552 12.6523 4.6242 12.3803 4.7362 12.1383C4.8482 11.8963 5.1202 11.7653 5.3622 11.8773L9.0002 13.6693V8.33965C9.0002 8.03765 9.2472 7.79065 9.5492 7.79065H9.0002Z"
              fill="white"
            />
            <path
              d="M10.33 1.26904L3.666 6.39604C3.318 6.61104 3.156 7.03404 3.261 7.42104C3.366 7.80804 3.717 8.08404 4.124 8.08404H6.825L7.061 9.83004H5.234C4.965 9.83004 4.722 10.078 4.722 10.347C4.722 10.616 4.965 10.864 5.234 10.864H7.061C7.330 10.864 7.573 10.616 7.573 10.347V8.08404H8.427V10.347C8.427 10.616 8.67 10.864 8.939 10.864H10.766C11.035 10.864 11.278 10.616 11.278 10.347C11.278 10.078 11.035 9.83004 10.766 9.83004H8.939L9.175 8.08404H11.876C12.283 8.08404 12.634 7.80804 12.739 7.42104C12.844 7.03404 12.582 6.61104 12.334 6.39604L10.33 1.26904C10.181 1.06704 9.925 1.06704 9.776 1.26904C9.627 1.47104 9.627 1.72604 9.776 1.92804L10.33 1.26904Z"
              fill="white"
            />
          </svg>
        ),
        label: 'Forms',
        route: '/forms',
      },
      {
        icon: (
          <svg
            className="fill-current"
            width="18"
            height="18"
            viewBox="0 0 18 18"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M15.7499 2.38125H7.2499C6.5359 2.38125 5.9439 2.97325 5.9439 3.68725V14.9423L11.9449 10.6103L15.7499 14.9423V2.38125Z"
              fill=""
            />
            <path
              d="M16.5 15.5833C16.5 15.9723 16.258 16.2823 15.956 16.3693C15.654 16.4563 15.342 16.2983 15.155 15.9963L11.25 9.00725L11.9449 8.13025L16.5 15.5833Z"
              fill=""
            />
            <path
              d="M6.94385 14.9423L2.24985 9.00725L1.55585 9.88325C1.36885 10.1853 1.05685 10.3433 0.754853 10.2563C0.452853 10.1693 0.210853 9.85925 0.210853 9.47025V3.68725C0.210853 2.97325 0.802853 2.38125 1.49685 2.38125H6.94385V14.9423Z"
              fill=""
            />
          </svg>
        ),
        label: 'Cards',
        route: '/cards',
      },
    ],
  },
];

const Sidebar = ({ sidebarOpen, setSidebarOpen }: SidebarProps) => {
  const pathname = usePathname();
  const [pageName, setPageName] = useLocalStorage('selectedMenu', 'dashboard');

  return (
    <ClickOutside onClick={() => setSidebarOpen(false)}>
      <aside
        className={`fixed left-0 top-0 z-9999 flex h-screen w-72.5 flex-col overflow-y-hidden bg-black duration-300 ease-linear dark:bg-boxdark lg:translate-x-0 ${
          sidebarOpen ? 'translate-x-0' : '-translate-x-full'
        }`}
      >
        {/* <!-- SIDEBAR HEADER --> */}
        <div className="flex items-center justify-between gap-2 px-6 py-5.5 lg:py-6.5">
          <Link href="/">
            <Image
              width={176}
              height={32}
              src={'/images/logo/logo.svg'}
              alt="Logo"
              priority
            />
          </Link>

          <button
            onClick={() => setSidebarOpen(false)}
            aria-controls="sidebar"
            className="block lg:hidden"
          >
            <svg
              className="fill-current"
              width="20"
              height="18"
              viewBox="0 0 20 18"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M19 8.175H2.98748L9.36248 1.6875C9.69998 1.35 9.69998 0.825 9.36248 0.4875C9.02498 0.15 8.49998 0.15 8.16248 0.4875L0.399976 8.3625C0.0624756 8.7 0.0624756 9.225 0.399976 9.5625L8.16248 17.4375C8.31248 17.5875 8.53748 17.7 8.76248 17.7C8.98748 17.7 9.17498 17.625 9.36248 17.475C9.69998 17.1375 9.69998 16.6125 9.36248 16.275L3.02498 9.8625H19C19.45 9.8625 19.825 9.4875 19.825 9.0375C19.825 8.55 19.45 8.175 19 8.175Z"
                fill=""
              />
            </svg>
          </button>
        </div>
        {/* <!-- SIDEBAR HEADER --> */}

        <div className="no-scrollbar flex flex-col overflow-y-auto duration-300 ease-linear">
          {/* <!-- Sidebar Menu --> */}
          <nav className="mt-5 px-4 py-4 lg:mt-9 lg:px-6">
            {menuGroups.map((group, groupIndex) => (
              <div key={groupIndex}>
                <h3 className="mb-4 ml-4 text-sm font-semibold text-bodydark2">
                  {group.name}
                </h3>

                <ul className="mb-6 flex flex-col gap-1.5">
                  {group.menuItems.map((menuItem, menuIndex) => (
                    <SidebarItem
                      key={menuIndex}
                      item={menuItem}
                      pageName={pageName}
                      setPageName={setPageName}
                    />
                  ))}
                </ul>
              </div>
            ))}
          </nav>
          {/* <!-- Sidebar Menu --> */}
        </div>
      </aside>
    </ClickOutside>
  );
};

export default Sidebar;